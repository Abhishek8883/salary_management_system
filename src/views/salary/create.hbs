<body class="sidebar-mini sidebar-closed sidebar-collapse" style="padding: 0; height:100vh;">
    <div class="wrapper">

        <nav class="main-header navbar navbar-expand navbar-white navbar-light">

            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/dashboard" class="nav-link">Home</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/employee/getAll/1" class="nav-link">Employees</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block active">
                    <a href="/salary/getAll/1" class="nav-link">Salaries</a>
                </li>
            </ul>

            <ul class="navbar-nav ml-auto">

                <li class="nav-item">
                    <a class="nav-link" href="/logout">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </a>
                </li>




            </ul>
        </nav>


        <aside class="main-sidebar sidebar-dark-primary elevation-4">


            <div class="sidebar">

                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0asqwSvPU4RVk6IBON33SXvgJel3Atmw4s_aV5-4YLA&s"
                            class="img-circle elevation-2" alt="User Image">
                    </div>
                    <div class="info">
                        <a href="#" class="d-block">Admin</a>
                    </div>
                </div>

                <div class="form-inline">


                    <nav class="mt-2">
                        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                            data-accordion="false">
                            <li class="nav-item ">
                                <a href="/dashboard" class="nav-link">
                                    <i class="fa-solid fa-gauge"></i>
                                    <p>
                                        &nbsp;
                                        Dashboard
                                    </p>
                                </a>
                            </li>


                            <li class="nav-item menu-is-opening ">
                                <a href="/employee/getAll/1" class="nav-link">
                                    <i class="fa-solid fa-briefcase"></i>
                                    <p>
                                        &nbsp;
                                        Employees
                                        <i class="right fas fa-angle-left"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview" style="display: block;">
                                    <li class="nav-item">
                                        <a href="/employee/getAll/1" class="nav-link">
                                            <i class="fa-solid fa-users"></i>
                                            &nbsp;
                                            <p>Show All</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/employee/createEmployeePage" class="nav-link">
                                            <i class="fa-solid fa-user-plus"></i>
                                            &nbsp;
                                            <p>Add</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/employee/getAll/1" class="nav-link">
                                            <i class="fa-solid fa-user-pen"></i>
                                            &nbsp;
                                            <p>Update</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/employee/getAll/1" class="nav-link">
                                            <i class="fa-solid fa-user-minus"></i>
                                            &nbsp;
                                            <p>Delete</p>
                                        </a>
                                    </li>

                                    </a>
                            </li>
                        </ul>
                        <li class="nav-item menu-open">
                            <a href="/salary/getAll/1" class="nav-link ">
                                <i class="fa-solid fa-coins"></i>
                                <p>
                                    &nbsp;
                                    Salary
                                </p>
                            </a>
                        </li>
                        </li>
                        </ul>
                    </nav>

                </div>

        </aside>

        <div class="content-wrapper " style="min-height: 646px;">

            <div class="content-header mb-4">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">Add Salary</h1>
                        </div>
                    </div>
                </div>
            </div>


            <div class="content">
                <div class="container-fluid">
                    <div class="row d-flex justify-content-center">
                        <div class="card card-info">
                            <div class="card-header">
                                <h3 class="card-title">Add Salary</h3>
                            </div>


                            <form id="salaryForm" action="/salary/create" method="post" class="form-horizontal"
                                style="min-width: 30vw;">
                                <div class="card-body">
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-sm-3 col-form-label">Employee</label>
                                        <div class="col">
                                            <select name="employee_id" id="employee_id" class="form-control">
                                                <option selected disabled>Select Employee</option>
                                                {{#each Employees}}
                                                <option value={{this.id}}>{{this.Name}}</option>
                                                {{/each}}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputmonth" class="col-sm-3 col-form-label">Month</label>
                                        <div class="col">
                                            <select name="month" id="inputMonth" class="form-control">
                                                <option selected disabled>Select Month</option>
                                                <option value="1">January</option>
                                                <option value="2">February</option>
                                                <option value="3">March</option>
                                                <option value="4">April</option>
                                                <option value="5">May</option>
                                                <option value="6">June</option>
                                                <option value="7">July</option>
                                                <option value="8">August</option>
                                                <option value="9">September</option>
                                                <option value="10">October</option>
                                                <option value="11">November</option>
                                                <option value="12">December</option>

                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputYear" class="col-sm-3 col-form-label">Year</label>
                                        <div class="col">
                                            <select name="year" id="inputYear" class="form-control">
                                                <option selected disabled>Select Year</option>
                                                {{#each years}}
                                                <option value={{this}}>{{this}}</option>
                                                {{/each}}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword3" class="col-sm-3 col-form-label">Total Working
                                            Days</label>
                                        <div class="col">
                                            <input name="total_working_days" type="number" class="form-control mt-4"
                                                id="inputPassword3" placeholder="Working days">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword3" class="col-sm-3 col-form-label">Total Leave
                                            Taken</label>
                                        <div class="col">
                                            <input id="inputPassword3" type="number" name="total_leave_taken"
                                                class="form-control mt-2" placeholder="Leave Taken">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="inputPassword3" class="col-sm-3 col-form-label">Overtime(in
                                            Hrs)</label>
                                        <div class="col">
                                            <input name="overtime" type="number" class="form-control mt-2"
                                                id="inputPassword3" placeholder="Overtime">
                                        </div>
                                    </div>
                                </div>

                                <div class="card-footer">
                                    <button type="submit" class="btn btn-info">Add</button>
                                    <a href="./">
                                        <button class="btn btn-default float-right">Cancel</button>
                                    </a>
                                </div>

                            </form>
                        </div>
                    </div>

                </div>
            </div>

        </div>


        <aside class="control-sidebar control-sidebar-dark" style="display: none;">

            <div class="p-3">
                <h5>Title</h5>
                <p>Sidebar content</p>
            </div>
        </aside>

        <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
        <script src="/adminlte/plugins/jquery/jquery.min.js"></script>
        <script src="/adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="/adminlte/dist/js/adminlte.min.js?v=3.2.0"></script>
        <script src="https://kit.fontawesome.com/d74e30dfe4.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js" integrity="sha512-xIPqqrfvUAc/Cspuj7Bq0UtHNo/5qkdyngx6Vwt+tmbvTLDszzXM0G6c91LXmGrRx8KEPulT+AfOOez+TeVylg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            let sub = document.querySelector('form')
            let inputYear = document.querySelector('#inputYear')
            let inputMonth = document.querySelector('#inputMonth')
            let employee_id = document.querySelector('#employee_id')

            sub.addEventListener('submit', function (e) {
                e.preventDefault()
                axios.post('/salary/isSalaryCalculated', {
                    month: inputMonth.value,
                    year: inputYear.value,
                    employee_id:employee_id.value
                })
                    .then(function (response) {
                        if(response.data.state){
                            alert("Salary Already calculated for this month.")
                        }
                        else{
                            sub.submit()
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    })

            })
        </script>

</body>